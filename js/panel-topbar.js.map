{"version":3,"sources":["../src/panel-topbar.tsx"],"names":["PSHeader","renderRoomTab","id","room","PS","rooms","closable","cur","isVisible","notifying","notifications","length","isSubtleNotifying","className","icon","title","closeButton","type","idChunks","substr","split","formatid","battle","p1","name","p2","charAt","closeBracketIndex","indexOf","slice","render","userColor","window","BattleLog","color","usernameColor","user","userid","props","style","Config","routes","client","leftRoomList","map","roomid","marginLeft","leftRoomWidth","rightRoomList","prefs","mute","preact","Component","document","body","getElementById","UserRoom","options","classType","isSelf","username","test","send","PSRoom","UserPanel","mainmenu","userdetailsCache","avatar","group","server","getGroup","groupName","globalGroup","globalGroupName","roomsList","battlebuf","chatbuf","privatebuf","curRoom","roomrank","toRoomid","ownBattle","toUserid","roomLink","isPrivate","push","unshift","away","status","startsWith","Dex","resolveAvatar","users","named","PSRoomPanel","roomTypes","Model","VolumePanel","setVolume","e","slider","currentTarget","set","Number","value","forceUpdate","setMute","checkbox","checked","update","componentDidMount","subscriptions","subscribe","effectvolume","musicvolume","notifvolume","OptionsPanel","setCheckbox","dark"],"mappings":"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","sourcesContent":["/**\r\n * Topbar Panel\r\n *\r\n * Topbar view - handles the topbar and some generic popups.\r\n *\r\n * Also sets up global event listeners.\r\n *\r\n * @author Guangcong Luo <guangcongluo@gmail.com>\r\n * @license AGPLv3\r\n */\r\n\r\nclass PSHeader extends preact.Component<{style: {}}> {\r\n\trenderRoomTab(id: RoomID) {\r\n\t\tconst room = PS.rooms[id]!;\r\n\t\tconst closable = (id === '' || id === 'rooms' ? '' : ' closable');\r\n\t\tconst cur = PS.isVisible(room) ? ' cur' : '';\r\n\t\tconst notifying = room.notifications.length ? ' notifying' : room.isSubtleNotifying ? ' subtle-notifying' : '';\r\n\t\tlet className = `roomtab button${notifying}${closable}${cur}`;\r\n\t\tlet icon = null;\r\n\t\tlet title = room.title;\r\n\t\tlet closeButton = null;\r\n\t\tswitch (room.type) {\r\n\t\tcase '':\r\n\t\tcase 'mainmenu':\r\n\t\t\ticon = <i class=\"fa fa-home\"></i>;\r\n\t\t\tbreak;\r\n\t\tcase 'teambuilder':\r\n\t\t\ticon = <i class=\"fa fa-pencil-square-o\"></i>;\r\n\t\t\tbreak;\r\n\t\tcase 'ladder':\r\n\t\t\ticon = <i class=\"fa fa-list-ol\"></i>;\r\n\t\t\tbreak;\r\n\t\tcase 'battles':\r\n\t\t\ticon = <i class=\"fa fa-caret-square-o-right\"></i>;\r\n\t\t\tbreak;\r\n\t\tcase 'rooms':\r\n\t\t\ticon = <i class=\"fa fa-plus\" style=\"margin:7px auto -6px auto\"></i>;\r\n\t\t\ttitle = '';\r\n\t\t\tbreak;\r\n\t\tcase 'battle':\r\n\t\t\tlet idChunks = id.substr(7).split('-');\r\n\t\t\tlet formatid;\r\n\t\t\t// TODO: relocate to room implementation\r\n\t\t\tif (idChunks.length <= 1) {\r\n\t\t\t\tif (idChunks[0] === 'uploadedreplay') formatid = 'Uploaded Replay';\r\n\t\t\t} else {\r\n\t\t\t\tformatid = idChunks[0];\r\n\t\t\t}\r\n\t\t\tif (!title) {\r\n\t\t\t\tlet battle = (room as any).battle as Battle | undefined;\r\n\t\t\t\tlet p1 = battle?.p1?.name || '';\r\n\t\t\t\tlet p2 = battle?.p2?.name || '';\r\n\t\t\t\tif (p1 && p2) {\r\n\t\t\t\t\ttitle = `${p1} v. ${p2}`;\r\n\t\t\t\t} else if (p1 || p2) {\r\n\t\t\t\t\ttitle = `${p1}${p2}`;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttitle = `(empty room)`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ticon = <i class=\"text\">{formatid}</i>;\r\n\t\t\tbreak;\r\n\t\tcase 'chat':\r\n\t\t\ticon = <i class=\"fa fa-comment-o\"></i>;\r\n\t\t\tbreak;\r\n\t\tcase 'html':\r\n\t\tdefault:\r\n\t\t\tif (title.charAt(0) === '[') {\r\n\t\t\t\tlet closeBracketIndex = title.indexOf(']');\r\n\t\t\t\tif (closeBracketIndex > 0) {\r\n\t\t\t\t\ticon = <i class=\"text\">{title.slice(1, closeBracketIndex)}</i>;\r\n\t\t\t\t\ttitle = title.slice(closeBracketIndex + 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ticon = <i class=\"fa fa-file-text-o\"></i>;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tif (closable) {\r\n\t\t\tcloseButton = <button class=\"closebutton\" name=\"closeRoom\" value={id} aria-label=\"Close\">\r\n\t\t\t\t<i class=\"fa fa-times-circle\"></i>\r\n\t\t\t</button>;\r\n\t\t}\r\n\t\treturn <li><a class={className} href={`/${id}`} draggable={true}>{icon} <span>{title}</span></a>{closeButton}</li>;\r\n\t}\r\n\trender() {\r\n\t\tconst userColor = window.BattleLog && {color: BattleLog.usernameColor(PS.user.userid)};\r\n\t\treturn <div id=\"header\" class=\"header\" style={this.props.style}>\r\n\t\t\t<img\r\n\t\t\t\tclass=\"logo\"\r\n\t\t\t\tsrc={`https://${Config.routes.client}/pokemonshowdownbeta.png`}\r\n\t\t\t\tsrcset={`https://${Config.routes.client}/pokemonshowdownbeta@2x.png 2x`}\r\n\t\t\t\talt=\"PokÃ©mon Showdown! (beta)\"\r\n\t\t\t\twidth=\"146\" height=\"44\"\r\n\t\t\t/>\r\n\t\t\t<div class=\"maintabbarbottom\"></div>\r\n\t\t\t<div class=\"tabbar maintabbar\"><div class=\"inner\">\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t{this.renderRoomTab('' as RoomID)}\r\n\t\t\t\t</ul>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t{PS.leftRoomList.slice(1).map(roomid => this.renderRoomTab(roomid))}\r\n\t\t\t\t</ul>\r\n\t\t\t\t<ul class=\"siderooms\" style={{float: 'none', marginLeft: PS.leftRoomWidth - 144}}>\r\n\t\t\t\t\t{PS.rightRoomList.map(roomid => this.renderRoomTab(roomid))}\r\n\t\t\t\t</ul>\r\n\t\t\t</div></div>\r\n\t\t\t<div class=\"userbar\">\r\n\t\t\t\t<span class=\"username\" data-name={PS.user.name} style={userColor}>\r\n\t\t\t\t\t<i class=\"fa fa-user\" style=\"color:#779EC5\"></i> {PS.user.name}\r\n\t\t\t\t</span> {}\r\n\t\t\t\t<button class=\"icon button\" name=\"joinRoom\" value=\"volume\" title=\"Sound\" aria-label=\"Sound\">\r\n\t\t\t\t\t<i class={PS.prefs.mute ? 'fa fa-volume-off' : 'fa fa-volume-up'}></i>\r\n\t\t\t\t</button> {}\r\n\t\t\t\t<button class=\"icon button\" name=\"joinRoom\" value=\"options\" title=\"Options\" aria-label=\"Options\">\r\n\t\t\t\t\t<i class=\"fa fa-cog\"></i>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>;\r\n\t}\r\n}\r\n\r\npreact.render(<PSMain />, document.body, document.getElementById('ps-frame')!);\r\n\r\n/**\r\n * User popup\r\n */\r\n\r\nclass UserRoom extends PSRoom {\r\n\treadonly classType = 'user';\r\n\tuserid: ID;\r\n\tname: string;\r\n\tisSelf: boolean;\r\n\tconstructor(options: RoomOptions) {\r\n\t\tsuper(options);\r\n\t\tthis.userid = this.id.slice(5) as ID;\r\n\t\tthis.isSelf = (this.userid === PS.user.userid);\r\n\t\tthis.name = options.username as string || this.userid;\r\n\t\tif (/[a-zA-Z0-9]/.test(this.name.charAt(0))) this.name = ' ' + this.name;\r\n\t\tPS.send(`|/cmd userdetails ${this.userid}`);\r\n\t}\r\n}\r\n\r\nclass UserPanel extends PSRoomPanel<UserRoom> {\r\n\trender() {\r\n\t\tconst room = this.props.room;\r\n\t\tconst user = PS.mainmenu.userdetailsCache[room.userid] || {userid: room.userid, avatar: '[loading]'};\r\n\t\tconst name = room.name.slice(1);\r\n\r\n\t\tconst group = PS.server.getGroup(room.name);\r\n\t\tlet groupName: preact.ComponentChild = group.name || null;\r\n\t\tif (group.type === 'punishment') {\r\n\t\t\tgroupName = <span style='color:#777777'>{groupName}</span>;\r\n\t\t}\r\n\r\n\t\tconst globalGroup = PS.server.getGroup(user.group);\r\n\t\tlet globalGroupName: preact.ComponentChild = globalGroup.name && `Global ${globalGroup.name}` || null;\r\n\t\tif (globalGroup.type === 'punishment') {\r\n\t\t\tglobalGroupName = <span style='color:#777777'>{globalGroupName}</span>;\r\n\t\t}\r\n\t\tif (globalGroup.name === group.name) groupName = null;\r\n\r\n\t\tlet roomsList: preact.ComponentChild = null;\r\n\t\tif (user.rooms) {\r\n\t\t\tlet battlebuf = [];\r\n\t\t\tlet chatbuf = [];\r\n\t\t\tlet privatebuf = [];\r\n\t\t\tfor (let roomid in user.rooms) {\r\n\t\t\t\tif (roomid === 'global') continue;\r\n\t\t\t\tconst curRoom = user.rooms[roomid];\r\n\t\t\t\tlet roomrank: preact.ComponentChild = null;\r\n\t\t\t\tif (!/[A-Za-z0-9]/.test(roomid.charAt(0))) {\r\n\t\t\t\t\troomrank = <small style=\"color: #888; font-size: 100%\">{roomid.charAt(0)}</small>;\r\n\t\t\t\t}\r\n\t\t\t\troomid = toRoomid(roomid);\r\n\r\n\t\t\t\tif (roomid.substr(0, 7) === 'battle-') {\r\n\t\t\t\t\tconst p1 = curRoom.p1!.substr(1);\r\n\t\t\t\t\tconst p2 = curRoom.p2!.substr(1);\r\n\t\t\t\t\tconst ownBattle = (PS.user.userid === toUserid(p1) || PS.user.userid === toUserid(p2));\r\n\t\t\t\t\tconst roomLink = <a href={`/${roomid}`} class={'ilink' + (ownBattle || roomid in PS.rooms ? ' yours' : '')}\r\n\t\t\t\t\t\ttitle={`${p1 || '?'} v. ${p2 || '?'}`}\r\n\t\t\t\t\t>{roomrank}{roomid.substr(7)}</a>;\r\n\t\t\t\t\tif (curRoom.isPrivate) {\r\n\t\t\t\t\t\tif (privatebuf.length) privatebuf.push(', ');\r\n\t\t\t\t\t\tprivatebuf.push(roomLink);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (battlebuf.length) battlebuf.push(', ');\r\n\t\t\t\t\t\tbattlebuf.push(roomLink);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst roomLink = <a href={`/${roomid}`} class={'ilink' + (roomid in PS.rooms ? ' yours' : '')}>\r\n\t\t\t\t\t\t{roomrank}{roomid}\r\n\t\t\t\t\t</a>;\r\n\t\t\t\t\tif (curRoom.isPrivate) {\r\n\t\t\t\t\t\tif (privatebuf.length) privatebuf.push(\", \");\r\n\t\t\t\t\t\tprivatebuf.push(roomLink);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (chatbuf.length) chatbuf.push(', ');\r\n\t\t\t\t\t\tchatbuf.push(roomLink);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (battlebuf.length) battlebuf.unshift(<br />, <em>Battles:</em>, \" \");\r\n\t\t\tif (chatbuf.length) chatbuf.unshift(<br />, <em>Chatrooms:</em>, \" \");\r\n\t\t\tif (privatebuf.length) privatebuf.unshift(<br />, <em>Private rooms:</em>, \" \");\r\n\t\t\tif (battlebuf.length || chatbuf.length || privatebuf.length) {\r\n\t\t\t\troomsList = <small class=\"rooms\">{battlebuf}{chatbuf}{privatebuf}</small>;\r\n\t\t\t}\r\n\t\t} else if (user.rooms === false) {\r\n\t\t\troomsList = <strong class=\"offline\">OFFLINE</strong>;\r\n\t\t}\r\n\r\n\t\tconst isSelf = user.userid === PS.user.userid;\r\n\t\tlet away = false;\r\n\t\tlet status = null;\r\n\t\tif (user.status) {\r\n\t\t\taway = user.status.startsWith('!');\r\n\t\t\tstatus = away ? user.status.slice(1) : user.status;\r\n\t\t}\r\n\r\n\t\treturn <PSPanelWrapper room={room}>\r\n\t\t\t<div class=\"userdetails\">\r\n\t\t\t\t{user.avatar !== '[loading]' &&\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tclass={'trainersprite' + (room.isSelf ? ' yours' : '')}\r\n\t\t\t\t\t\tsrc={Dex.resolveAvatar('' + (user.avatar || 'unknown'))}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\t<strong><a href={`//${Config.routes.users}/${user.userid}`} target=\"_blank\" style={away ? {color: '#888888'} : null}>{name}</a></strong><br />\r\n\t\t\t\t{status && <div class=\"userstatus\">{status}</div>}\r\n\t\t\t\t{groupName && <div class=\"usergroup roomgroup\">{groupName}</div>}\r\n\t\t\t\t{globalGroupName && <div class=\"usergroup globalgroup\">{globalGroupName}</div>}\r\n\t\t\t\t{roomsList}\r\n\t\t\t</div>\r\n\t\t\t{isSelf || !PS.user.named ?\r\n\t\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t\t<button class=\"button disabled\" disabled>Challenge</button> {}\r\n\t\t\t\t\t<button class=\"button disabled\" disabled>Chat</button>\r\n\t\t\t\t</p>\r\n\t\t\t:\r\n\t\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t\t<button class=\"button\" data-href={`/challenge-${user.userid}`}>Challenge</button> {}\r\n\t\t\t\t\t<button class=\"button\" data-href={`/pm-${user.userid}`}>Chat</button> {}\r\n\t\t\t\t\t<button class=\"button disabled\" name=\"userOptions\">{'\\u2026'}</button>\r\n\t\t\t\t</p>\r\n\t\t\t}\r\n\t\t\t{isSelf && <hr />}\r\n\t\t\t{isSelf && <p class=\"buttonbar\" style=\"text-align: right\">\r\n\t\t\t\t<button class=\"button disabled\" name=\"login\"><i class=\"fa fa-pencil\"></i> Change name</button> {}\r\n\t\t\t\t<button class=\"button disabled\" name=\"logout\"><i class=\"fa fa-power-off\"></i> Log out</button>\r\n\t\t\t</p>}\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nPS.roomTypes['user'] = {\r\n\tModel: UserRoom,\r\n\tComponent: UserPanel,\r\n};\r\n\r\nclass VolumePanel extends PSRoomPanel {\r\n\tsetVolume = (e: Event) => {\r\n\t\tconst slider = e.currentTarget as HTMLInputElement;\r\n\t\tPS.prefs.set(slider.name as 'effectvolume', Number(slider.value));\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\tsetMute = (e: Event) => {\r\n\t\tconst checkbox = e.currentTarget as HTMLInputElement;\r\n\t\tPS.prefs.set('mute', !!checkbox.checked);\r\n\t\tPS.update();\r\n\t};\r\n\tcomponentDidMount() {\r\n\t\tsuper.componentDidMount();\r\n\t\tthis.subscriptions.push(PS.prefs.subscribe(() => {\r\n\t\t\tthis.forceUpdate();\r\n\t\t}));\r\n\t}\r\n\trender() {\r\n\t\tconst room = this.props.room;\r\n\t\treturn <PSPanelWrapper room={room}>\r\n\t\t\t<h3>Volume</h3>\r\n\t\t\t<p class=\"volume\">\r\n\t\t\t\t<label class=\"optlabel\">Effects: <span class=\"value\">{!PS.prefs.mute && PS.prefs.effectvolume ? `${PS.prefs.effectvolume}%` : `muted`}</span></label>\r\n\t\t\t\t{PS.prefs.mute ?\r\n\t\t\t\t\t<em>(muted)</em> :\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"range\" min=\"0\" max=\"100\" step=\"1\" name=\"effectvolume\" value={PS.prefs.effectvolume}\r\n\t\t\t\t\t\tonChange={this.setVolume} onInput={this.setVolume} onKeyUp={this.setVolume}\r\n\t\t\t\t\t/>}\r\n\t\t\t</p>\r\n\t\t\t<p class=\"volume\">\r\n\t\t\t\t<label class=\"optlabel\">Music: <span class=\"value\">{!PS.prefs.mute && PS.prefs.musicvolume ? `${PS.prefs.musicvolume}%` : `muted`}</span></label>\r\n\t\t\t\t{PS.prefs.mute ?\r\n\t\t\t\t\t<em>(muted)</em> :\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"range\" min=\"0\" max=\"100\" step=\"1\" name=\"musicvolume\" value={PS.prefs.musicvolume}\r\n\t\t\t\t\t\tonChange={this.setVolume} onInput={this.setVolume} onKeyUp={this.setVolume}\r\n\t\t\t\t\t/>}\r\n\t\t\t</p>\r\n\t\t\t<p class=\"volume\">\r\n\t\t\t\t<label class=\"optlabel\">Notifications: <span class=\"value\">{!PS.prefs.mute && PS.prefs.notifvolume ? `${PS.prefs.notifvolume}%` : `muted`}</span></label>\r\n\t\t\t\t{PS.prefs.mute ?\r\n\t\t\t\t\t<em>(muted)</em> :\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"range\" min=\"0\" max=\"100\" step=\"1\" name=\"notifvolume\" value={PS.prefs.notifvolume}\r\n\t\t\t\t\t\tonChange={this.setVolume} onInput={this.setVolume} onKeyUp={this.setVolume}\r\n\t\t\t\t\t/>}\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\"><input type=\"checkbox\" name=\"mute\" checked={PS.prefs.mute} onChange={this.setMute} /> Mute all</label>\r\n\t\t\t</p>\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nPS.roomTypes['volume'] = {\r\n\tComponent: VolumePanel,\r\n};\r\n\r\nclass OptionsPanel extends PSRoomPanel {\r\n\tsetCheckbox = (e: Event) => {\r\n\t\tconst checkbox = e.currentTarget as HTMLInputElement;\r\n\t\tPS.prefs.set(checkbox.name as 'dark', !!checkbox.checked);\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\trender() {\r\n\t\tconst room = this.props.room;\r\n\t\treturn <PSPanelWrapper room={room}>\r\n\t\t\t<h3>Graphics</h3>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\"><input type=\"checkbox\" name=\"dark\" checked={PS.prefs.dark} onChange={this.setCheckbox} /> Dark mode</label>\r\n\t\t\t</p>\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nPS.roomTypes['options'] = {\r\n\tComponent: OptionsPanel,\r\n};\r\n"],"file":"panel-topbar.js"}